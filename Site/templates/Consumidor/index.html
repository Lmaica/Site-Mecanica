{% extends 'NavAdimin.html' %}

{% block contentConsumidor %}

<style>
    .mobile-produtos {
        display: none;
    }

    .desktop-produtos {
        display: block;
    }

    .capitalize {
        text-transform: lowercase;
    }

    .capitalize::first-letter {
        text-transform: uppercase;
    }

    .container-consumidor-oferta {
        margin: 0 auto;
        padding-top: 20px;
    }

    .produto-oferta {
        position: relative;
        width: 300px;
        height: 300px;
        margin: 10px;
        border: 1px solid #ccc;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.8);

    }


    .produto-oferta img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.7;
        border-radius: 10px;
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .produto-oferta-escrita {
        position: absolute;
        bottom: 10px;
        left: 10px;
        color: #000000;
        font-size: 3vw;
        width: 95%;
    }

    .produto-oferta-escrita h2 {
        text-align: left;
        text-shadow:
            0 0 1px rgb(255, 255, 255),
            0 0 2px rgb(255, 255, 255),
            0 0 3px rgb(255, 255, 255),
            0 0 4px rgb(255, 255, 255),
            0 0 5px rgb(255, 255, 255),
            0 0 6px rgb(255, 255, 255),
            0 0 7px rgb(255, 255, 255);
    }

    .produto-oferta-escrita span {
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .produto-oferta-escrita span:hover {
        background-color: #0056b3;
    }


    @keyframes fire {
        0% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.2),
                0 0 15px rgba(255, 0, 0, 0.4),
                0 0 20px rgba(255, 0, 0, 0.6),
                0 0 25px rgba(255, 0, 0, 0.8),
                0 0 30px rgba(255, 0, 0, 0.9);
        }

        20% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.2),
                0 0 15px rgba(255, 0, 0, 0.4),
                0 0 20px rgba(255, 0, 0, 0.6),
                0 0 25px rgba(255, 0, 0, 0.8),
                0 0 30px rgba(255, 0, 0, 0.9),
                0 0 35px rgba(255, 0, 0, 1);
        }


        60% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.4),
                0 0 15px rgba(255, 0, 0, 0.6),
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 25px rgba(255, 0, 0, 1),
                0 0 30px rgba(255, 0, 0, 1),
                0 0 35px rgba(255, 0, 0, 1);
        }


        100% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.6),
                0 0 15px rgba(255, 0, 0, 0.8),
                0 0 20px rgba(255, 0, 0, 0.9),
                0 0 25px rgba(255, 0, 0, 1),
                0 0 30px rgba(255, 0, 0, 1),
                0 0 35px rgba(255, 0, 0, 1);
        }

        60% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.4),
                0 0 15px rgba(255, 0, 0, 0.6),
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 25px rgba(255, 0, 0, 1),
                0 0 30px rgba(255, 0, 0, 1),
                0 0 35px rgba(255, 0, 0, 1);
        }

        20% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.2),
                0 0 15px rgba(255, 0, 0, 0.4),
                0 0 20px rgba(255, 0, 0, 0.6),
                0 0 25px rgba(255, 0, 0, 0.8),
                0 0 30px rgba(255, 0, 0, 0.9),
                0 0 35px rgba(255, 0, 0, 1);
        }

        0% {
            text-shadow:
                0 0 1px rgb(255, 255, 255),
                0 0 2px rgb(255, 255, 255),
                0 0 3px rgb(255, 255, 255),
                0 0 10px rgba(255, 0, 0, 0.2),
                0 0 15px rgba(255, 0, 0, 0.4),
                0 0 20px rgba(255, 0, 0, 0.6),
                0 0 25px rgba(255, 0, 0, 0.8);

        }


    }


    .valor-consumidor-oferta {
        font-weight: bold;
        font-family: 'Arial Black', sans-serif;
        color: rgb(0, 0, 0);
        margin-top: 10px;
        text-align: right;
        text-shadow:
            0 0 1px rgb(255, 255, 255),
            0 0 2px rgb(255, 255, 255),
            0 0 3px rgb(255, 255, 255);
        animation: fire 0.3s infinite alternate;
    }


    .container-iterno-consumidor {
        margin: 0 auto;
        padding-top: 20px;
        padding-bottom: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        grid-gap: 20px;
    }

    .produto {
        position: relative;
        text-align: center;
        background-color: #fff;
        border-radius: 15px;
        padding: 10px;
        margin: 0px;
        box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.5);
    }

    .produto:hover {
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        transform: scale(1.05);
    }

    .produto img {
        width: 100%;
        height: 150px;
        border-radius: 10px;
        padding: 0;

    }

    .produto h2 {
        font-size: 1.2vw;
        margin: 10px 0;
        padding-bottom: 20px;
    }

    .container-iterno-consumidor {
        grid-template-columns: repeat(5, minmax(20px, 1fr));
    }

    .valor-consumidor {
        color: #0e320b;
        font-weight: bold;
        margin-top: 10px;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        text-align: center;
        padding-bottom: 10px;
    }



    @media screen and (max-width: 760px) {
        .produto img {
            max-width: 200px;
        }

        .mobile-produtos {
            display: block;
        }


        .desktop-produtos {
            display: none;
        }

        .container-iterno-consumidor {
            display: block;
            overflow-y: none;
        }

        .grupo-produtos-container {
            overflow-x: auto;
            overflow-y: none;
            margin: 0;
            left: 0;
            display: flex;
        }

        .grupo-produtos {
            display: flex;
            width: 100%;
        }

        .produto {
            min-width: 200px;
            margin: 10px;
            width: 100%;
        }

        .produto-tratamento {
            min-width: 200px;
            margin: 10px;
            width: 100%;
        }

        .produto-oferta {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.8);
        }


        .produto h2 {
            font-size: 3vw;
            margin: 10px 0;
        }

        .valor-consumidor-oferta {
            margin-top: 10px;
            font-size: 5vw;
        }
    }
</style>
<div class="margens-consumidor">
    <div class="container-consumidor-oferta">
        <div class="carousel">
            {% for item in combosOfertas %}
            <div class="produto-oferta">
                <img src="{{ url_for('static', filename='imagens/' + item.image_1) }}" alt="Produto-oferta 1">
                <div class="produto-oferta-escrita">
                    <h2 class="capitalize">{{item.nome}}</h2>
                    <p class="valor-consumidor-oferta">{{item.valor_total}}</p>
                    <span onclick="abrirDetalhes('{{ item.id }}')">Saiba Mais</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div id="search-consumidor">
        <div class="search-box-consumidor">
            <form method="POST">
                {% if busca %}
                <input class="anular " value="{{busca}}" type="text" id="searchinput" placeholder="Buscar Serviços"
                    autofocus="autofocus" name="search_string" aria-label="searchConsumidor">
                {% else %}
                <input class="anular" type="text" id="searchinput" placeholder="Buscar Serviços" name="search_string"
                    aria-label="searchConsumidor">
                {% endif %}
                <button id="search-button" formaction="/searchConsumidor"><i class="fas fa-search"></i> Buscar</button>
            </form>
        </div>
    </div>
    <div class="desktop-produtos">
        <div class="container-iterno-consumidor" id="container-iterno-consumidor">
            {% for item in combos %}
            <div class="produto" onclick="abrirDetalhes('{{ item.id }}')">
                <img src="{{ url_for('static', filename='imagens/' + item.image_1) }}" alt="Produto 1">
                <h2 class="capitalize">{{item.nome}}</h2>
                <div class="valor-consumidor">
                    <p class="valor-consumidor">{{item.valor_total}}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="mobile-produtos">
        <div class="container-iterno-consumidor" id="container-iterno-consumidor">
            {% for group in combos|batch(3) %}
            <div class="grupo-produtos-container">
                {% for item in group %}
                <div class="grupo-produtos">
                    <div class="produto" onclick="abrirDetalhes('{{ item.id }}')">
                        <img src="{{ url_for('static', filename='imagens/' + item.image_1) }}" alt="Produto 1">
                        <h2 class="capitalize">{{ item.nome }}</h2>
                        <div class="valor-consumidor">
                            <p class="valor-consumidor">{{ item.valor_total }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>




    <div class="pagination">
        {% if combos.has_prev %}
        {% if busca %}
        <form action="{{ url_for('searchConsumidor', page=combos.prev_num) }}" method="POST">
            <input value="{{ busca }}" type="hidden" id="searchinput" name="search_string">
            <input value="{{ escolha }}" type="hidden" id="searchselector" name="searchselector">
            <button type="submit">&lt;</button>
        </form>
        {% else %}
        <a href="{{ url_for('Consumidor', page=combos.prev_num) }}">&lt;</a>
        {% endif %}
        {% endif %}
        {% if combos.total > 10 %}
        {% for page_num in combos.iter_pages(left_edge=0, right_edge=1, left_current=1, right_current=1) %}
        {% if page_num %}
        {% if combos.page == page_num %}
        {%if busca %}
        <form action="{{ url_for('searchConsumidor', page=page_num) }}" method="POST">
            <input value="{{ busca }}" type="hidden" id="searchinput" name="search_string">
            <input value="{{ escolha }}" type="hidden" id="searchselector" name="searchselector">
            <button class="paginationActive" type="submit">{{ page_num }}</button>
        </form>
        {% else %}
        <a class="paginationActive" href="{{ url_for('Consumidor', page=page_num) }}">{{ page_num }}</a>
        {% endif %}
        {% else %}
        {%if busca %}
        <form action="{{ url_for('searchConsumidor', page=page_num) }}" method="POST">
            <input value="{{ busca }}" type="hidden" id="searchinput" name="search_string">
            <input value="{{ escolha }}" type="hidden" id="searchselector" name="searchselector">
            <button type="submit">{{ page_num }}</button>
        </form>
        {% else %}
        <a href="{{ url_for('Consumidor', page=page_num) }}">{{ page_num }}</a>
        {% endif %}
        {% endif %}
        {% endif %}
        {% endfor %}
        {% endif %}
        {% if combos.has_next %}
        {% if busca %}
        <form action="{{ url_for('searchConsumidor', page=combos.next_num) }}" method="POST">
            <input value="{{ busca }}" type="hidden" id="searchinput" name="search_string">
            <input value="{{ escolha }}" type="hidden" id="searchselector" name="searchselector">
            <button type="submit">&gt;</button>
        </form>
        {% else %}
        <a href="{{ url_for('Consumidor', page=combos.next_num) }}">&gt;</a>
        {% endif %}
        {% endif %}
    </div>
</div>

<script>
    function abrirDetalhes(id) {
        window.location.href = `/dadosInformativos/${id}`;
    }
    $(document).ready(function () {
        $('.carousel').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            dots: true,
            arrows: false,
            autoplay: true,
            autoplaySpeed: 3000,
            responsive: [
                {
                    breakpoint: 767,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        infinite: true,
                        dots: true,
                        arrows: false,
                        centerMode: true,
                        centerPadding: '30px'
                    }
                }
            ]
        });
    });
</script>

{% endblock contentConsumidor %}